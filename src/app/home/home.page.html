<ion-content>
  <div class="header-container">
    <!-- Logo centrado -->
    <div class="logo-container">
      <img src="assets/logo1.png" alt="PsyWell Logo" class="small-logo" />
    </div>


    <!-- Botón de cerrar sesión -->
    <ion-button fill="clear" class="logout-button" (click)="logout()">
      <ion-icon name="log-out-outline"></ion-icon>
    </ion-button>
  </div>

  <div class="profile-info-container">
    <!-- Información del perfil -->
    <div class="profile-info" [style.background-image]="'url(' + bannerImage + ')'">
      <!-- Imagen de perfil -->
      <div class="profile-image-container">
        <ion-avatar>
          <img [src]="profileImage" alt="User Profile" />
        </ion-avatar>
        <!-- Lápiz para editar imagen de perfil -->
        <span class="edit-icon" (click)="openImageModal('profile')">✏️</span>
      </div>

      <!-- Detalles del usuario con fondo translúcido -->
      <div class="user-details">
        <h2>{{ userName }}</h2>
        <p>{{ userEmail }}</p>
      </div>

      <!-- Lápiz para editar banner -->
      <div class="banner-edit-container">
        <span class="edit-icon" (click)="openImageModal('banner')">✏️</span>
      </div>
    </div>
  </div>

  <!-- Sección de citas -->
  <div class="citas-container">
    <h2>Tus Próximas Citas</h2>
    
    <!-- Mostrar el botón de "Pedir Cita" si no hay citas -->
    <div *ngIf="citas.length === 0" class="no-citas-container">
      <ion-button (click)="openPsychologistModal()" expand="block" color="primary">
        Pedir Cita
      </ion-button>
    </div>

    <ion-grid *ngIf="citas.length > 0">
      <ion-row>
        <ion-col size="12" *ngFor="let cita of citas">
          <div class="cita-card">
            <div class="cita-header">
              <ion-avatar>
                <img [src]="cita.fotoPsicologo || 'assets/default-psicologo.png'" alt="Psicólogo" />
              </ion-avatar>
              <div class="cita-header-details">
                <h3>{{ cita.nombrePsicologo }}</h3>
                <p>Especialista en Salud Mental</p>
              </div>
              <!-- Botón para activar/desactivar la alarma -->
              <ion-button fill="clear" (click)="toggleAlarm(cita)">
                <ion-icon [name]="cita.alarmActive ? 'notifications' : 'notifications-off'"></ion-icon>
              </ion-button>
            </div>
            <div class="cita-body">
              <p><strong>Paciente:</strong> {{ cita.nombrePaciente }}</p>
              <p><strong>Fecha:</strong> {{ cita.fecha | date: 'fullDate' }}</p>
              <p><strong>Hora:</strong> {{ cita.horaInicio }} - {{ cita.horaFin }}</p>
              <p><strong>Ubicación:</strong> {{ cita.ubicacion }}</p>
              <p><strong>Comentarios:</strong> {{ cita.comentarios }}</p>
            </div>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-segment>
      <!-- Botón de registrar emociones -->
      <ion-segment-button [ngClass]="{'active-segment': currentSegment === 'registrar-emociones'}" (click)="navigateTo('/registrar-emociones')">
        <img src="assets/emotes/calendario.svg" alt="Registrar emociones" class="nav-icon" />
      </ion-segment-button>
      <!-- Botón de home -->
      <ion-segment-button [ngClass]="{'active-segment': currentSegment === 'home'}" (click)="navigateTo('/home')">
        <img src="assets/emotes/home.svg" alt="Home" class="nav-icon" />
      </ion-segment-button>
      <!-- Botón de tips -->
      <ion-segment-button [ngClass]="{'active-segment': currentSegment === 'tips'}" (click)="navigateTo('/tips')">
        <img src="assets/emotes/tranquilidad.svg" alt="Tips" class="nav-icon" />
      </ion-segment-button>
      <!-- Botón de reloj -->
      <ion-segment-button [ngClass]="{'active-segment': currentSegment === 'reloj'}" (click)="navigateTo('/reloj')">
        <img src="assets/emotes/reloj.webp" alt="Reloj" class="nav-icon" />
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-footer>
